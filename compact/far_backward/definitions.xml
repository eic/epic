<!-- SPDX-License-Identifier: LGPL-3.0-or-later -->
<!-- Copyright (C) 2022 Simon Gardner, Jaroslav Adam, Wouter Deconinck -->

  <define>

    <comment> Connection to central beam pipe </comment>

    <constant name="Center_Beampipe_End"  value="-OutgoingLeptonBeamPipe_z1"/>
    <constant name="Center_Beampipe_Rad"  value="OutgoingLeptonBeamPipe_d1/2"/>

    <constant name="Hadron_Beampipe_End"        value="-IncomingHadronBeamPipe_z5"/>
    <constant name="Hadron_Beampipe_Rad"        value="IncomingHadronBeamPipe_d5/2"/>
    <constant name="Hadron_Beampipe_Thickness"  value="1.64*mm"/>

    <comment> Electron magnet dimensions and positions </comment>

    <constant name="Q1eR_InnerRadius"     value="67.5*mm"/>
    <constant name="Q1eR_Length"          value="1.800*m"/>
    <constant name="Q1eR_CenterZ"         value="-6.200*m"/>
    <constant name="Q1eR_CenterX"         value="-0.0568*m"/>
    <constant name="Q1eR_K1L"             value="-0.4140*1/m"/>
    <constant name="Q1eR_K1"              value="-0.2300*1/m^2"/>

    <constant name="Q2eR_InnerRadius"     value="78.0*mm"/>
    <constant name="Q2eR_Length"          value="1.400*m"/>
    <constant name="Q2eR_CenterZ"         value="-8.300*m"/>
    <constant name="Q2eR_CenterX"         value="-0.0720*m"/>
    <constant name="Q2eR_K1L"             value="0.3164*1/m"/>
    <constant name="Q2eR_K1"              value="0.2260*1/m^2"/>

    <constant name="B2AeR_InnerRadius"    value="90.0*mm"/>
    <constant name="B2AeR_Length"         value="3.800*m"/>
    <constant name="B2AeR_CenterZ"        value="-18.649*m"/>
    <constant name="B2AeR_CenterX"        value="-0.1739*m"/>
    <constant name="B2AeR_BendAngle"      value="-0.0050*rad"/>

    <constant name="B2BeR_InnerRadius"    value="111.0*mm"/>
    <constant name="B2BeR_Length"         value="1.500*m"/>
    <constant name="B2BeR_CenterZ"        value="-21.699*m"/>
    <constant name="B2BeR_CenterX"        value="-0.2098*m"/>
    <constant name="B2BeR_BendAngle"      value="-0.0150*rad"/>

    <constant name="Q3eR_InnerRadius"     value="0.05*m"/>
    <constant name="Q3eR_Length"          value="0.6000*m"/>
    <constant name="Q3eR_Theta"           value="0.0200*rad"/>
    <constant name="Q3eR_CenterZ"         value="-42.818*m"/>
    <constant name="Q3eR_CenterX"         value="-0.7887*m"/>
    <constant name="Q3eR_StartZ"          value="Q3eR_CenterZ + (Q3eR_Length/2)*cos(Q3eR_Theta)"/>
    <constant name="Q3eR_StartX"          value="Q3eR_CenterX + (Q3eR_Length/2)*sin(Q3eR_Theta)"/>
    <constant name="Q3eR_K1L"             value="0.1148*1/m"/>
    <constant name="Q3eR_K1"              value="0.1914*1/m^2"/>

    <constant name="SQ3eR_InnerRadius"    value="0.05*m"/>
    <constant name="SQ3eR_OuterRadius"    value="0.15*m"/>
    <constant name="SQ3eR_Length"         value="0.2500*m"/>
    <constant name="SQ3eR_CenterZ"        value="-42.243*m"/>
    <constant name="SQ3eR_CenterX"        value="-0.7677*m"/>
    <constant name="SQ3eR_Theta"          value="0.0200*rad"/>
    <constant name="SQ3eR_K1L"            value="0.000000*1/m"/>
    <constant name="SQ3eR_K1"             value="0.000000*1/m^2"/>

    <constant name="SQ4eR_InnerRadius"    value="0.05*m"/>
    <constant name="SQ4eR_OuterRadius"    value="0.15*m"/>
    <constant name="SQ4eR_Length"         value="0.2500*m"/>
    <constant name="SQ4eR_CenterZ"        value="-46.741*m"/>
    <constant name="SQ4eR_CenterX"        value="-0.8937*m"/>
    <constant name="SQ4eR_Theta"          value="0.0200*rad"/>
    <constant name="SQ4eR_K1L"            value="0.000000*1/m"/>
    <constant name="SQ4eR_K1"             value="0.000000*1/m^2"/>

    <constant name="Q4eR_CenterZ"         value="-47.316*m"/>
    <constant name="Q4eR_CenterX"         value="-0.9147*m"/>
    <constant name="Q4eR_Length"          value="0.6000*m"/>
    <constant name="Q4eR_InnerRadius"     value="0.05*m"/>
    <constant name="Q4eR_OuterRadius"     value="0.2*m"/>
    <constant name="Q4eR_Theta"           value="0.0200*rad"/>
    <constant name="Q4eR_K1L"             value="-0.2388*1/m"/>
    <constant name="Q4eR_K1"              value="-0.3979*1/m^2"/>

    <constant name="B3eR_CenterZ"         value="-53.713*m"/>
    <constant name="B3eR_CenterX"         value="-1.101*m"/>
    <constant name="B3eR_Length"          value="0.8914*m"/>
    <constant name="B3eR_InnerRadius"     value="0.05*m"/>
    <constant name="B3eR_OuterRadius"     value="0.24*m"/>
    <constant name="B3eR_Theta"           value="0.0264*rad"/>
    <constant name="B3eR_BendAngle"       value="-0.0064*rad"/>

    <constant name="SQ5eR_InnerRadius"    value="0.05*m"/>
    <constant name="SQ5eR_OuterRadius"    value="0.15*m"/>
    <constant name="SQ5eR_Length"         value="0.2500*m"/>
    <constant name="SQ5eR_CenterZ"        value="-51.240*m"/>
    <constant name="SQ5eR_CenterX"        value="-1.020*m"/>
    <constant name="SQ5eR_Theta"          value="0.0200*rad"/>
    <constant name="SQ5eR_K1L"            value="0.000000*1/m"/>
    <constant name="SQ5eR_K1"             value="0.000000*1/m^2"/>

    <constant name="Q5eR_InnerRadius"     value="0.05*m"/>
    <constant name="Q5eR_OuterRadius"     value="0.2*m"/>
    <constant name="Q5eR_Length"          value="0.6000*m"/>
    <constant name="Q5eR_CenterZ"         value="-51.814*m"/>
    <constant name="Q5eR_CenterX"         value="-1.041*m"/>
    <constant name="Q5eR_Theta"           value="0.0200*rad"/>
    <constant name="Q5eR_K1L"             value="0.1843*1/m"/>
    <constant name="Q5eR_K1"              value="0.3072*1/m^2"/>

    <constant name="SQ6eR_InnerRadius"    value="0.05*m"/>
    <constant name="SQ6eR_OuterRadius"    value="0.15*m"/>
    <constant name="SQ6eR_Length"         value="0.2500*m"/>
    <constant name="SQ6eR_CenterZ"        value="-55.138*m"/>
    <constant name="SQ6eR_CenterX"        value="-1.139*m"/>
    <constant name="SQ6eR_Theta"          value="0.0264*rad"/>
    <constant name="SQ6eR_K1L"            value="0.000000*1/m"/>
    <constant name="SQ6eR_K1"             value="0.000000*1/m^2"/>

    <constant name="SQ7eR_InnerRadius"    value="0.05*m"/>
    <constant name="SQ7eR_OuterRadius"    value="0.15*m"/>
    <constant name="SQ7eR_Length"         value="0.2500*m"/>
    <constant name="SQ7eR_CenterZ"        value="-59.635*m"/>
    <constant name="SQ7eR_CenterX"        value="-1.294*m"/>
    <constant name="SQ7eR_Theta"          value="0.0264*rad"/>
    <constant name="SQ7eR_K1L"            value="0.000000*1/m"/>
    <constant name="SQ7eR_K1"             value="0.000000*1/m^2"/>

    <constant name="SQ8eR_InnerRadius"    value="0.05*m"/>
    <constant name="SQ8eR_OuterRadius"    value="0.15*m"/>
    <constant name="SQ8eR_Length"         value="0.2500*m"/>
    <constant name="SQ8eR_CenterZ"        value="-64.432*m"/>
    <constant name="SQ8eR_CenterX"        value="-1.459*m"/>
    <constant name="SQ8eR_Theta"          value="0.0264*rad"/>
    <constant name="SQ8eR_K1L"            value="0.000000*1/m"/>
    <constant name="SQ8eR_K1"             value="0.000000*1/m^2"/>

    <constant name="Q8eR_InnerRadius"     value="0.05*m"/>
    <constant name="Q8eR_OuterRadius"     value="0.2*m"/>
    <constant name="Q8eR_Length"          value="1.200*m"/>
    <constant name="Q8eR_CenterZ"         value="-65.306*m"/>
    <constant name="Q8eR_CenterX"         value="-1.505*m"/>
    <constant name="Q8eR_Theta"          value="0.0264*rad"/>
    <constant name="Q8eR_K1L"             value="0.1345*1/m"/>
    <constant name="Q8eR_K1"              value="0.1121*1/m^2"/>

    <constant name="RF_Crab_Length"       value="4.000*m"/>
    <constant name="RF_Crab_CenterZ"      value="-68.404*m"/>
    <constant name="RF_Crab_CenterX"      value="-1.660*m"/>
    <constant name="RF_Crab_Theta"        value="0.0264*rad"/>

    <constant name="Q9eR_InnerRadius"     value="0.05*m"/>
    <constant name="Q9eR_OuterRadius"     value="0.2*m"/>
    <constant name="Q9eR_Length"          value="1.200*m"/>
    <constant name="Q9eR_CenterZ"         value="-71.503*m"/>
    <constant name="Q9eR_CenterX"         value="-1.719*m"/>
    <constant name="Q9eR_Theta"          value="0.0264*rad"/>
    <constant name="Q9eR_K1L"             value="0.1611*1/m"/>
    <constant name="Q9eR_K1"              value="0.1343*1/m^2"/>

    <constant name="SQ10eR_InnerRadius"   value="0.05*m"/>
    <constant name="SQ10eR_OuterRadius"   value="0.15*m"/>
    <constant name="SQ10eR_Length"        value="0.2500*m"/>
    <constant name="SQ10eR_CenterZ"       value="-75.352*m"/>
    <constant name="SQ10eR_CenterX"       value="-1.835*m"/>
    <constant name="SQ10eR_Theta"         value="0.0264*rad"/>
    <constant name="SQ10eR_K1L"           value="0.000000*1/m"/>
    <constant name="SQ10eR_K1"            value="0.000000*1/m^2"/>

    <constant name="Q10eR_InnerRadius"    value="0.05*m"/>
    <constant name="Q10eR_OuterRadius"    value="0.2*m"/>
    <constant name="Q10eR_Length"         value="1.200*m"/>
    <constant name="Q10eR_CenterZ"        value="-76.226*m"/>
    <constant name="Q10eR_CenterX"        value="-1.881*m"/>
    <constant name="Q10eR_Theta"          value="0.0264*rad"/>
    <constant name="Q10eR_K1L"            value="-0.2765*1/m"/>
    <constant name="Q10eR_K1"             value="-0.2304*1/m^2"/>

    <constant name="D4eR_1_Length"        value="2.726*m"/>
    <constant name="D4eR_1_CenterZ"       value="-78.740*m"/>
    <constant name="D4eR_1_CenterX"       value="-1.977*m"/>
    <constant name="D4eR_1_Theta"         value="0.0134*rad"/>
    <constant name="D4eR_1_BendAngle"     value="0.0130*rad"/>
    <constant name="D4eR_1_InnerRadius"   value="0.05*m"/>
    <constant name="D4eR_1_OuterRadius"   value="0.24*m"/>

    <constant name="Q11eR_InnerRadius"    value="0.05*m"/>
    <constant name="Q11eR_OuterRadius"    value="0.2*m"/>
    <constant name="Q11eR_Length"         value="1.200*m"/>
    <constant name="Q11eR_CenterZ"        value="-81.102*m"/>
    <constant name="Q11eR_CenterX"        value="-2.011*m"/>
    <constant name="Q11eR_Theta"          value="0.0134*rad"/>
    <constant name="Q11eR_K1L"            value="0.1911*1/m"/>
    <constant name="Q11eR_K1"             value="0.1592*1/m^2"/>

    <constant name="D4eR_2_Length"        value="2.726*m"/>
    <constant name="D4eR_2_CenterZ"       value="-83.617*m"/>
    <constant name="D4eR_2_CenterX"       value="-2.063*m"/>
    <constant name="D4eR_2_Theta"         value="0.000341*rad"/>
    <constant name="D4eR_2_BendAngle"     value="0.0130*rad"/>
    <constant name="D4eR_2_InnerRadius"   value="0.05*m"/>
    <constant name="D4eR_2_OuterRadius"   value="0.24*m"/>

    <constant name="Q12eR_InnerRadius"    value="0.05*m"/>
    <constant name="Q12eR_OuterRadius"    value="0.2*m"/>
    <constant name="Q12eR_Length"         value="1.200*m"/>
    <constant name="Q12eR_CenterZ"        value="-85.980*m"/>
    <constant name="Q12eR_CenterX"        value="-2.076*m"/>
    <constant name="Q12eR_Theta"          value="0.000341*rad"/>
    <constant name="Q12eR_K1L"            value="0.2028*1/m"/>
    <constant name="Q12eR_K1"             value="0.1690*1/m^2"/>

    <constant name="D4eR_3_Length"        value="2.726*m"/>
    <constant name="D4eR_3_CenterZ"       value="-88.495*m"/>
    <constant name="D4eR_3_CenterX"       value="-2.086*m"/>
    <constant name="D4eR_3_Theta"         value="-0.0127*rad"/>
    <constant name="D4eR_3_BendAngle"     value="0.0130*rad"/>
    <constant name="D4eR_3_InnerRadius"   value="0.05*m"/>
    <constant name="D4eR_3_OuterRadius"   value="0.24*m"/>

    <constant name="Q13eR_InnerRadius"    value="0.05*m"/>
    <constant name="Q13eR_OuterRadius"    value="0.2*m"/>
    <constant name="Q13eR_Length"         value="1.200*m"/>
    <constant name="Q13eR_CenterZ"        value="-90.858*m"/>
    <constant name="Q13eR_CenterX"        value="-2.078*m"/>
    <constant name="Q13eR_Theta"          value="-0.0127*rad"/>
    <constant name="Q13eR_K1L"            value="-0.2500*1/m"/>
    <constant name="Q13eR_K1"             value="-0.2083*1/m^2"/>

    <constant name="D4eR_4_Length"        value="2.726*m"/>
    <constant name="D4eR_4_CenterZ"       value="-93.372*m"/>
    <constant name="D4eR_4_CenterX"       value="-2.045*m"/>
    <constant name="D4eR_4_Theta"         value="-0.0257*rad"/>
    <constant name="D4eR_4_BendAngle"     value="0.0130*rad"/>
    <constant name="D4eR_4_InnerRadius"   value="0.05*m"/>
    <constant name="D4eR_4_OuterRadius"   value="0.24*m"/>

    <constant name="D4eR_5_Length"        value="2.726*m"/>
    <constant name="D4eR_5_CenterZ"       value="-98.249*m"/>
    <constant name="D4eR_5_CenterX"       value="-1.941*m"/>
    <constant name="D4eR_5_Theta"         value="-0.0388*rad"/>
    <constant name="D4eR_5_BendAngle"     value="0.0130*rad"/>
    <constant name="D4eR_5_InnerRadius"   value="0.05*m"/>
    <constant name="D4eR_5_OuterRadius"   value="0.24*m"/>

    <constant name="B4eR_CenterZ"         value="-55*m"/>
    <constant name="B4eR_CenterX"         value="-0.79*m"/>
    <constant name="B4eR_Length"          value="1.2*m"/>
    <constant name="B4eR_InnerRadius"     value="0.05*m"/>
    <constant name="B4eR_OuterRadius"     value="0.24*m"/>
    <constant name="B4eR_Theta"           value="Q3eR_Theta*6/8"/>
    <constant name="B4eR_BendAngle"       value="0.0*rad"/>

    <constant name="B5eR_CenterZ"         value="-59.98*m"/>
    <constant name="B5eR_CenterX"         value="-0.93*m"/>
    <constant name="B5eR_Length"          value="1.2*m"/>
    <constant name="B5eR_InnerRadius"     value="0.05*m"/>
    <constant name="B5eR_OuterRadius"     value="0.24*m"/>
    <constant name="B5eR_Theta"           value="Q3eR_Theta*5/8"/>
    <constant name="B5eR_BendAngle"       value="0.0*rad"/>

    <constant name="B6eR_CenterZ"         value="-64.97*m"/>
    <constant name="B6eR_CenterX"         value="-1.05*m"/>
    <constant name="B6eR_Length"          value="1.2*m"/>
    <constant name="B6eR_InnerRadius"     value="0.05*m"/>
    <constant name="B6eR_OuterRadius"     value="0.24*m"/>
    <constant name="B6eR_Theta"           value="Q3eR_Theta*4/8"/>
    <constant name="B6eR_BendAngle"       value="0.0*rad"/>

    <constant name="B7eR_CenterZ"         value="-69.96*m"/>
    <constant name="B7eR_CenterX"         value="-1.19*m"/>
    <constant name="B7eR_Length"          value="1.2*m"/>
    <constant name="B7eR_InnerRadius"     value="0.05*m"/>
    <constant name="B7eR_OuterRadius"     value="0.24*m"/>
    <constant name="B7eR_Theta"           value="Q3eR_Theta*3/8"/>
    <constant name="B7eR_BendAngle"       value="0.0*rad"/>


    <comment> Hadron magnet dimensions and positions </comment>

    <constant name="Q1APR_InnerRadius"    value="Hadron_Beampipe_Rad"/>
    <constant name="Q1APR_Length"         value="1.8*m"/>
    <constant name="Q1APR_StartZ"         value="-5.29834383626*m"/>
    <constant name="Q1APR_StartX"         value="0.13248619835*m"/>
    <constant name="Q1APR_EndZ"           value="-7.09778136555*m"/>
    <constant name="Q1APR_EndX"           value="0.17748151099*m"/>
    <constant name="Q1APR_Theta"          value="CrossingAngle"/>

    <constant name="Q1BPR_InnerRadius"    value="Hadron_Beampipe_Rad"/>
    <constant name="Q1BPR_Length"         value="1.4*m"/>
    <constant name="Q1BPR_StartZ"         value="-7.59762512369533560*m"/>
    <constant name="Q1BPR_StartX"         value="0.189980208951863655*m"/>
    <constant name="Q1BPR_EndZ"           value="-8.99718764648131852*m"/>
    <constant name="Q1BPR_EndX"           value="0.224976563232413274*m"/>
    <constant name="Q1BPR_Theta"          value="CrossingAngle"/>

    <constant name="Q2PR_InnerRadius"     value="Hadron_Beampipe_Rad"/>
    <constant name="Q2PR_Length"          value="4.5*m"/>
    <constant name="Q2PR_StartZ"          value="-10.4967189208948746*m"/>
    <constant name="Q2PR_StartX"          value="0.262472657104463214*m"/>
    <constant name="Q2PR_EndZ"            value="-14.9953127441355356*m"/>
    <constant name="Q2PR_EndX"            value="0.374960938720726777*m"/>
    <constant name="Q2PR_Theta"           value="CrossingAngle"/>

    <constant name="Q3PR_CenterX"         value="0.9686*m"/>
    <constant name="Q3PR_CenterZ"         value="-38.7385*m"/>
    <constant name="Q3PR_InnerRadius"     value="Hadron_Beampipe_Rad"/>
    <constant name="Q3PR_OuterRadius"     value="0.29*m"/>
    <constant name="Q3PR_Length"          value="1.5*m"/>
    <constant name="Q3PR_StartZ"          value="-37.9887505859252528*m"/>
    <constant name="Q3PR_StartX"          value="0.949916672201157830*m"/>
    <constant name="Q3PR_EndZ"            value="-39.4882818603388088*m"/>
    <constant name="Q3PR_EndX"            value="0.987412766073207715*m"/>
    <constant name="Q3PR_Theta"           value="CrossingAngle"/>

    <comment> Note: Placements for Crab1PR, Crab2PR, Crab3PR, Q4PR, B1PR
              are approximate (valid to within ~1 cm).
              Should be updated with detailed input from the accelerator group
    </comment>

    <constant name="Crab1PR_CenterZ"      value="-42.43*m"/>
    <constant name="Crab1PR_CenterX"      value="1.07*m"/>
    <constant name="Crab1PR_Length"       value="5*m"/>
    <constant name="Crab1PR_InnerRadius"  value="0.05*m"/>
    <constant name="Crab1PR_OuterRadius"  value="0.5*m"/>
    <constant name="Crab1PR_Theta"        value="CrossingAngle"/>

    <constant name="Crab2PR_CenterZ"      value="-47.315*m"/>
    <constant name="Crab2PR_CenterX"      value="1.21*m"/>
    <constant name="Crab2PR_Length"       value="4.75*m"/>
    <constant name="Crab2PR_InnerRadius"  value="0.05*m"/>
    <constant name="Crab2PR_OuterRadius"  value="0.68*m"/>
    <constant name="Crab2PR_Theta"        value="CrossingAngle"/>

    <constant name="Crab3PR_CenterZ"      value="-52.5*m"/>
    <constant name="Crab3PR_CenterX"      value="1.33*m"/>
    <constant name="Crab3PR_Length"       value="4.75*m"/>
    <constant name="Crab3PR_InnerRadius"  value="0.05*m"/>
    <constant name="Crab3PR_OuterRadius"  value="0.68*m"/>
    <constant name="Crab3PR_Theta"        value="CrossingAngle"/>

    <constant name="Q4PR_CenterZ"         value="-56.35*m"/>
    <constant name="Q4PR_CenterX"         value="1.42*m"/>
    <constant name="Q4PR_Length"          value="1.5*m"/>
    <constant name="Q4PR_InnerRadius"     value="0.05*m"/>
    <constant name="Q4PR_OuterRadius"     value="0.29*m"/>
    <constant name="Q4PR_Theta"           value="CrossingAngle"/>

    <constant name="B1PR_CenterZ"         value="-75.59*m"/>
    <constant name="B1PR_CenterX"         value="1.86*m"/>
    <constant name="B1PR_Length"          value="3.7*m"/>
    <constant name="B1PR_InnerRadius"     value="0.05*m"/>
    <constant name="B1PR_OuterRadius"     value="0.4*m"/>
    <constant name="B1PR_Theta"           value="CrossingAngle"/>

    <comment>
      --------------------------
      Parameters for backwards vacuum box
      --------------------------
    </comment>
    <constant name="Vacuum_BB_MinX"       value="-2.5*m"/>
    <constant name="Vacuum_BB_MaxX"       value="0.5*m"/>
    <constant name="Vacuum_BB_MinY"       value="-1.5*m"/>
    <constant name="Vacuum_BB_MaxY"       value="1.5*m"/>
    <constant name="Vacuum_BB_MinZ"       value="B2BeR_CenterZ-B2BeR_Length/2"/>
    <constant name="Vacuum_BB_MaxZ"       value="Q3eR_CenterZ"/>

    <constant name="Beam_Theta"           value="Q3eR_Theta"/>

    <constant name="Backwards_Box_Wall"   value="2*mm"/>

    <comment> Dipole focal point in global coordinates </comment>
    <constant name="Dipole_Focus_X"       value="0.0*mm"/>
    <constant name="Dipole_Focus_Y"       value="0.0*mm"/>
    <constant name="Dipole_Focus_Z"       value="Q3eR_StartZ-Q3eR_StartX/tan(Beam_Theta)"/>

    <comment> Central pipe dimensions </comment>
    <constant name="Beam_Length"          value="(Dipole_Focus_Z-Q3eR_StartZ)/cos(Beam_Theta)"/>
    <constant name="Beam_WidthR"          value="Q3eR_InnerRadius"/>
    <constant name="Beam_WidthL"          value="Q3eR_InnerRadius"/>
    <constant name="Beam_Height"          value="Q3eR_InnerRadius"/>

    <comment> Entry box joining magnets, lumi and tagger systems </comment>
    <constant name="Exit_Height"          value="Q3eR_InnerRadius"/>
    <constant name="Exit_Width"           value="Q3eR_InnerRadius"/>
    <constant name="Exit_Theta"           value="0.07*rad"/>

    <comment> Timepix4 ASIC dimensions </comment>
    <constant name="Timepix4height"       value="28.16*mm"/>
    <constant name="Timepix4width"        value="24.64*mm"/>

    <comment> Tagger1 box and dimensions and positions </comment>
    <constant name="Tagger1_Width"        value="147.84*mm"/>
    <constant name="Tagger1_Height"       value="64.0*mm"/>

    <constant name="Tag_Tracker_1_Depth"  value="305*mm"/>
    <constant name="Tag_Cal_1_Depth"      value="300*mm"/>
    <constant name="Tagger1_Length"       value="Tag_Tracker_1_Depth"/>

    <constant name="Tagger1_Min_Theta"    value="0.0262*rad"/>
    <constant name="Tagger1_Max_Theta"    value="0.0410*rad"/>
    <constant name="Tagger1_Min_Offset"   value="Q3eR_InnerRadius+Backwards_Box_Wall"/>
    <constant name="Tagger1_Theta"        value="Beam_Theta"/>

    <comment> Tagger1 calculated constants, shared between vacuum and detector </comment>
    <!-- <constant name="Tagger1_Vac_Offset_X" value="(-0.5*Tagger1_Width-Backwards_Box_Wall)*cos(Tagger1_Theta-Beam_Theta)"/> -->
    <!-- <constant name="Tagger1_Vac_Offset_Z" value="(0.5*Tagger1_Width+Backwards_Box_Wall)*sin(Tagger1_Theta-Beam_Theta)"/> -->
    <!-- <constant name="Tagger1_Vac_Length"   value="(Tagger1_Min_Offset)/sin(Tagger1_Theta-Beam_Theta)"/> -->
    <constant name="Tagger1_Vac_Offset_X" value="(-0.5*Tagger1_Width-Backwards_Box_Wall)"/>
    <constant name="Tagger1_Vac_Offset_Z" value="0"/>
    <constant name="Tagger1_Vac_Length"   value="10.0*m"/>

    <constant name="Tagger1_X"            value="Dipole_Focus_X+Tagger1_Vac_Offset_X-Tagger1_Vac_Length*sin(Tagger1_Theta)"/>
    <constant name="Tagger1_Y"            value="Dipole_Focus_Y"/>
    <constant name="Tagger1_Z"            value="Dipole_Focus_Z+Tagger1_Vac_Offset_Z-Tagger1_Vac_Length*cos(Tagger1_Theta)"/>

    <comment> Tagger2 box and dimensions and positions </comment>
    <constant name="Tagger2_Width"        value="147.84*mm"/>
    <constant name="Tagger2_Height"       value="64.0*mm"/>

    <constant name="Tag_Tracker_2_Depth"  value="Tag_Tracker_1_Depth"/>
    <constant name="Tag_Cal_2_Depth"      value="Tag_Cal_1_Depth"/>
    <constant name="Tagger2_Length"       value="Tag_Tracker_2_Depth"/>

    <constant name="Tagger2_Min_Theta"    value="0.02*rad"/>
    <constant name="Tagger2_Max_Theta"    value="Tagger1_Min_Theta"/>
    <constant name="Tagger2_Min_Offset"   value="Q3eR_InnerRadius+Backwards_Box_Wall"/>

    <constant name="Tagger2_Theta"        value="Beam_Theta"/>

    <comment> Tagger2 calculated constants, shared between vacuum and detector </comment>
    <!-- <constant name="Tagger2_Vac_Offset_X" value="0.5*Tagger2_Width*cos(Tagger2_Theta-Beam_Theta)"/> -->
    <!-- <constant name="Tagger2_Vac_Offset_Z" value="0.5*Tagger2_Width*sin(Tagger2_Theta-Beam_Theta)"/> -->
    <!-- <constant name="Tagger2_Vac_Length"   value="(2*Tagger2_Vac_Offset_X+Tagger2_Min_Offset)/sin(Tagger2_Theta-Beam_Theta)"/> -->
    <constant name="Tagger2_Vac_Offset_X" value="0.5*Tagger2_Width"/>
    <constant name="Tagger2_Vac_Offset_Z" value="0"/>
    <constant name="Tagger2_Vac_Length"   value="10.0*m"/>

    <constant name="Tagger2_X"            value="Dipole_Focus_X+Tagger2_Vac_Offset_X-Tagger2_Vac_Length*sin(Tagger2_Theta)"/>
    <constant name="Tagger2_Y"            value="Dipole_Focus_Y"/>
    <constant name="Tagger2_Z"            value="Dipole_Focus_Z+Tagger2_Vac_Offset_Z-Tagger2_Vac_Length*cos(Tagger2_Theta)"/>


    <!--  -->
    <!-- Luminosity System -->
    <!--  -->
    <constant name="LumiBeamDiv_pref"     value="5 * 211e-6*rad"/>

    <!-- Lumi Exit Window -->
    <constant name="LumiWin_Zstart"       value="-18.5*m"/>
    <constant name="LumiWin_thickness"    value="1*cm"/>
    <constant name="LumiWin_R"            value="4*cm"/> <!-- opening radius of tagger box -->
    <constant name="LumiWin_Z"            value="LumiWin_Zstart - LumiWin_thickness/2."/>

    <!-- Lumi collimator -->
    <constant name="LumiColl_DZ"          value="30*cm"/>
    <constant name="LumiColl_X"           value="0*m"/>
    <constant name="LumiColl_Y"           value="0*m"/>
    <constant name="LumiColl_Z"           value="-22.6*m"/>

    <!-- Lumi lead walls -->
    <constant name="LumiWall_DX"          value="0.5*m"/>
    <constant name="LumiWall_DY"          value="1*m"/>
    <constant name="LumiWall_DZ"          value="20*cm"/>
    <constant name="LumiWall_Z"           value="-55*m"/>

    <!-- Lumi dipole magnets (sweeper and analyzer) -->
    <constant name="LumiMagMainBody_DZ"   value="1.200*m"/>
    <constant name="LumiMagCoils_DZ"      value="1.533*m"/>
    <constant name="LumiSweepMag_X"       value="0*m"/>
    <constant name="LumiSweepMag_Y"       value="0*m"/>
    <constant name="LumiSweepMag_Z"       value="-56*m"/>

    <constant name="LumiAnalyzerMag_X"    value="0*m"/>
    <constant name="LumiAnalyzerMag_Y"    value="0*m"/>
    <constant name="LumiAnalyzerMag_Z"    value="-4*m + LumiSweepMag_Z"/>

    <!-- Lumi photon chamber -->
    <constant name="LumiChamber_Z1"       value="LumiSweepMag_Z + LumiMagCoils_DZ/2.0"/>
    <constant name="LumiChamber_Z2"       value="LumiAnalyzerMag_Z - LumiMagCoils_DZ/2.0"/>
    <constant name="LumiChamber_DR"       value="2*mm"/>
    <constant name="LumiChamber_entrCap_DZ"  value="1*cm"/>
    <constant name="LumiChamber_exitCap_DZ"  value="0.5*cm"/>

    <!-- Lumi converter -->
    <constant name="LumiConverter_Z"      value="(LumiAnalyzerMag_Z + LumiSweepMag_Z)/2.0"/>
    <constant name="LumiConverter_DZ"     value="1*mm"/>

    <!-- Lumi spectrometer CAL -->
    <constant name="LumiSpecCAL_SiPMSizeXY"       value="4*mm"/>
    <constant name="LumiSpecCAL_SiPMNumX"         value="14"/>
    <constant name="LumiSpecCAL_SiPMNumY"         value="2"/>
    <constant name="LumiSpecCAL_ZLayers"          value="20"/>
    <constant name="LumiSpecCAL_XYLayers"         value="3"/>
    <comment>
      Note : Values/Notations for making modules pointing along z-axis.
      Rotation of modules wrt XY axis after construction.
    </comment>

    <constant name="LumiSpecCAL_SiPMSpaceXY"      value="0.15*mm"/> <!-- mechanical space for adjacent SiPMs-->
    <constant name="LumiSpecCAL_LayerCoatX"       value="0.25*cm"/> <!-- mechanical covering of layers, def without rotation-->
    <constant name="LumiSpecCAL_LayerCoatY"       value="0.25*cm"/> <!-- mechanical covering of layers, def without rotation -->

    <constant name="LumiSpecCAL_ModSizeX"         value="LumiSpecCAL_SiPMNumX*(LumiSpecCAL_SiPMSizeXY + 2*LumiSpecCAL_SiPMSpaceXY)"/>
    <constant name="LumiSpecCAL_ModSizeY"         value="LumiSpecCAL_SiPMNumY*(LumiSpecCAL_SiPMSizeXY + 2*LumiSpecCAL_SiPMSpaceXY)"/>

    <!-- Add the size of layer coating to the overall size of CAL -->
    <constant name="LumiSpecCAL_DZ"               value="LumiSpecCAL_ZLayers*(LumiSpecCAL_ModSizeY + 2.0*LumiSpecCAL_LayerCoatY)"/>
    <constant name="LumiSpecCAL_DXY"              value="LumiSpecCAL_XYLayers*LumiSpecCAL_ModSizeX + 2.0*LumiSpecCAL_LayerCoatX"/>

    <constant name="LumiSpecCAL_ModSizeZ"         value="LumiSpecCAL_XYLayers*LumiSpecCAL_ModSizeX"/> <!-- fibre length -->
    <constant name="LumiSpecCAL_Z"                value="-8*m + LumiSweepMag_Z - LumiSpecCAL_DZ/2.0"/>
    <constant name="LumiSpecCAL_FiveSigma"        value="LumiBeamDiv_pref * fabs(LumiSpecCAL_Z)"/>
    <constant name="LumiSpecCAL_Y"                value="LumiSpecCAL_FiveSigma + LumiSpecCAL_DXY/2.0"/>

    <constant name="LumiSpecCAL_FiberRadius"      value="0.25*mm"/>
    <constant name="LumiSpecCAL_FiberSpaceX"      value="0.25*mm"/>
    <constant name="LumiSpecCAL_FiberSpaceY"      value="0.25*mm"/>

    <!-- Lumi spectrometer trackers -->
    <constant name="LumiSpecTracker_pixelSize"  value="0.1*mm"/>
    <constant name="LumiSpecTracker_DXY"  value="0.2*m"/>
    <constant name="LumiSpecTracker_Z1"   value="LumiSpecCAL_Z + LumiSpecCAL_DZ/2. + 1*cm"/>
    <constant name="LumiSpecTracker_Z2"   value="LumiSpecCAL_Z + LumiSpecCAL_DZ/2. + 11*cm"/>
    <constant name="LumiSpecTracker_Y1"   value="LumiSpecCAL_FiveSigma + LumiSpecTracker_DXY/2.0"/>
    <constant name="LumiSpecTracker_Y2"   value="LumiSpecTracker_Y1"/>

    <constant name="LumiSpecTracker_Si_DZ"   value="0.3*mm"/>
    <constant name="LumiSpecTracker_Cu_DZ"   value="0.14*mm"/>

    <!-- Lumi direct photon detector -->
    <constant name="LumiDirect_Z"         value="LumiSpecCAL_Z - 1*m"/>
    <constant name="LumiDirect_XY"        value="0.2*m"/>
    <constant name="LumiDirect_DZ"        value="0.2*m"/>

</define>
