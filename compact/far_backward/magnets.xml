<!-- SPDX-License-Identifier: LGPL-3.0-or-later -->
<!-- Copyright (C) 2022 Jaroslav Adam, Wouter Deconinck, Simon Gardner -->

<lccdd>

  <detectors>

    <comment> Electron side beam pipe volumes </comment>

    <!-- Beam pipe going from Q1eR to B2BeR -->
    <detector
    name="Pipe_Q1eR_to_B2BeR"
    type="BeamPipeChain"
    wall_thickness="Electron_Beampipe_Pipe_Wall_Thickness"
    vis="BeamPipeVis">
      <pipe id="0" name="Pipe_0"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_0_End + abs(Center_Beampipe_End - Electron_Beampipe_Pipe_0_End)/2"
        length="abs(Center_Beampipe_End - Electron_Beampipe_Pipe_0_End)" theta="0"
        rout1="Center_Beampipe_Rad" rout2="Electron_Beampipe_Pipe_0_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
      <pipe id="1" name="Pipe_1"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_1_End + abs(Electron_Beampipe_Pipe_0_End - Electron_Beampipe_Pipe_1_End)/2"
        length="abs(Electron_Beampipe_Pipe_0_End - Electron_Beampipe_Pipe_1_End)" theta="0"
        rout1="Electron_Beampipe_Pipe_0_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness"
        rout2="Electron_Beampipe_Pipe_1_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
      <pipe id="2" name="Pipe_2"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_2_End + abs(Electron_Beampipe_Pipe_1_End - Electron_Beampipe_Pipe_2_End)/2"
        length="abs(Electron_Beampipe_Pipe_1_End - Electron_Beampipe_Pipe_2_End)" theta="0"
        rout1="Electron_Beampipe_Pipe_1_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness"
        rout2="Electron_Beampipe_Pipe_2_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
      <pipe id="3" name="Pipe_3"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_3_End + abs(Electron_Beampipe_Pipe_2_End - Electron_Beampipe_Pipe_3_End)/2"
        length="abs(Electron_Beampipe_Pipe_2_End - Electron_Beampipe_Pipe_3_End)" theta="0"
        rout1="Electron_Beampipe_Pipe_2_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness"
        rout2="Electron_Beampipe_Pipe_3_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
      <pipe id="4" name="Pipe_4"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_4_End + abs(Electron_Beampipe_Pipe_3_End - Electron_Beampipe_Pipe_4_End)/2"
        length="abs(Electron_Beampipe_Pipe_3_End - Electron_Beampipe_Pipe_4_End)" theta="0"
        rout1="Electron_Beampipe_Pipe_3_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness"
        rout2="Electron_Beampipe_Pipe_4_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
      <pipe id="5" name="Pipe_5"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_5_End + abs(Electron_Beampipe_Pipe_4_End - Electron_Beampipe_Pipe_5_End)/2"
        length="abs(Electron_Beampipe_Pipe_4_End - Electron_Beampipe_Pipe_5_End)" theta="0"
        rout1="Electron_Beampipe_Pipe_4_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness"
        rout2="Electron_Beampipe_Pipe_5_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
      <pipe id="6" name="Pipe_6"
        xcenter="0" zcenter="Electron_Beampipe_Pipe_6_End + abs(Electron_Beampipe_Pipe_5_End - Electron_Beampipe_Pipe_6_End)/2"
        length="abs(Electron_Beampipe_Pipe_5_End - Electron_Beampipe_Pipe_6_End)" theta="0"
        rout1="Electron_Beampipe_Pipe_5_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness"
        rout2="Electron_Beampipe_Pipe_6_DI/2 + Electron_Beampipe_Pipe_Wall_Thickness">
      </pipe>
    </detector>

    <comment> Electron side beam magnet volumes </comment>

    <detector name="Magnet_Q1eR" type="ip6_CylindricalDipoleMagnet" vis="FFMagnetVis">
      <placement  x="0" y="0" z="Q1eR_CenterPosition" theta="0*rad"/>
      <dimensions x="Q1eR_InnerRadius*4" y="Q1eR_InnerRadius*4" z="Q1eR_Length" r="1.5*Q1eR_InnerRadius" />
      <apperture  x="Q1eR_InnerRadius*2" y="Q1eR_InnerRadius*2" r="Q1eR_InnerRadius" />
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector name="Magnet_Q2eR" type="ip6_CylindricalDipoleMagnet" vis="FFMagnetVis">
      <placement  x="0" y="0" z="Q2eR_CenterPosition" theta="0*rad"/>
      <dimensions x="Q2eR_InnerRadius*4" y="Q2eR_InnerRadius*4" z="Q2eR_Length" r="1.5*Q2eR_InnerRadius"/>
      <apperture  x="Q2eR_InnerRadius*2" y="Q2eR_InnerRadius*2" r="Q2eR_InnerRadius"/>
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector name="Magnet_B2BeR" type="ip6_CylindricalDipoleMagnet" vis="FFMagnetVis">
      <placement  x="0" y="0" z="B2BeR_CenterPosition" theta="0*rad"/>
      <dimensions x="B2BeR_InnerRadius*4" y="B2BeR_InnerRadius*4" z="B2BeR_Length" r="1.5*B2BeR_InnerRadius"/>
      <apperture  x="B2BeR_InnerRadius*2" y="B2BeR_InnerRadius*2" r="B2BeR_InnerRadius"/>
      <coil dx="2*cm" dy="1.5*cm" /><!--unchecked-->
    </detector>

    <detector
    name="Magnets_Q3eR"
    type="CylindricalMagnetChain"
    vis="RedVis">
      <magnet id="0" name="Magnet_Q3eR"
        x="(Q3eR_StartX+Q3eR_EndX)/2" y="0" z="(Q3eR_StartZ+Q3eR_EndZ)/2" theta="Q3eR_Theta"
        length="Q3eR_Length" rin="Q3eR_InnerRadius" rout="4*Q3eR_InnerRadius">
      </magnet>
    </detector>

  </detectors>

  <fields>

    <comment> Magnetic fields </comment>

    <field name="Magnet_Q1eR_Field" type="MultipoleMagnet">
      <shape type="Tube" rmax="Q1eR_InnerRadius" dz="Q1eR_Length/2"/>
      <position x="0" y="0" z="Q1eR_CenterPosition"/>
      <coefficient/>
      <coefficient coefficient="Q1eR_Gradient"/>
    </field>

    <field name="Magnet_Q2eR_Field" type="MultipoleMagnet">
      <shape type="Tube" rmax="Q2eR_InnerRadius" dz="Q2eR_Length/2"/>
      <position x="0" y="0" z="Q2eR_CenterPosition"/>
      <coefficient/>
      <coefficient coefficient="Q2eR_Gradient"/>
    </field>

    <field name="Magnet_Q3eR_Field" type="MultipoleMagnet">
      <shape type="Tube" rmax="Q3eR_InnerRadius" dz="Q3eR_Length/2"/>
      <position x="0" y="0" z="Q3eR_CenterPosition"/>
      <coefficient/>
      <coefficient coefficient="Q3eR_Gradient"/>
    </field>

    <field name="Magnet_B2BeR_Field" type="MultipoleMagnet">
      <shape type="Tube" rmax="B2BeR_InnerRadius" dz="B2BeR_Length/2"/>
      <position x="0" y="0" z="B2BeR_CenterPosition"/>
      <coefficient coefficient="B2BeR_B"/>
    </field>

  </fields>

</lccdd>
