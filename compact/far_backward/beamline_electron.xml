<!-- SPDX-License-Identifier: LGPL-3.0-or-later -->
<!-- Copyright (C) 2022-2025 Wouter Deconinck, Simon Gardner -->

<lccdd>

  <detectors>
  
    <comment> Electron side beam pipe volumes </comment>

    <!-- Beam pipe going from Q1eR to B2BeR -->
    <detector
    name="Pipe_Q1eR_to_B2BeR"
    type="BeamPipeChain"
    wall_thickness="1 * mm"
    vis="BeamPipeVis">
      <pipe id="0" name="Pipe_to_Q1eR"
        xcenter="0" zcenter="(Center_Beampipe_End + Q1eR_CenterPosition+Q1eR_Length/2)/2"
        length="Center_Beampipe_End - (Q1eR_CenterPosition+Q1eR_Length/2)" theta="0"
        rout1="Center_Beampipe_Rad" rout2="Q1eR_InnerRadius">
      </pipe>
      <pipe id="1" name="Pipe_in_Q1eR"
        xcenter="0" zcenter="Q1eR_CenterPosition"
        length="Q1eR_Length" theta="0"
        rout1="Q1eR_InnerRadius" rout2="Q1eR_InnerRadius">
      </pipe>
      <pipe id="2" name="Pipe_Q1eR_to_Q2eR"/>
      <pipe id="3" name="Pipe_in_Q2eR"
        xcenter="0" zcenter="Q2eR_CenterPosition"
        length="Q2eR_Length" theta="0"
        rout1="Q2eR_InnerRadius" rout2="Q2eR_InnerRadius">
      </pipe>
      <pipe id="4" name="Pipe_Q2eR_to_B2AeR"/>
      <pipe id="5" name="Pipe_in_B2AeR"
        xcenter="0" zcenter="B2AeR_CenterPosition"
        length="B2AeR_Length" theta="0"
        rout1="B2AeR_InnerRadius" rout2="B2AeR_InnerRadius">
      </pipe>
      <pipe id="6" name="Pipe_B2AeR_to_B2BeR"/>
      <pipe id="7" name="Pipe_in_B2BeR"
        xcenter="0" zcenter="B2BeR_CenterPosition"
        length="B2BeR_Length" theta="0"
        rout1="B2BeR_InnerRadius" rout2="B2BeR_InnerRadius">
      </pipe>
    </detector>

    <comment> Main beamline vacuum volume spanning between B2BeR and Q3eR magnets</comment>
    <detector name="BackwardsTaggerVacuum" type="FarBackwardVacuum" wall="Backwards_Box_Wall" lumi="true" vis="BeamPipeVis" >
      <focus      x="Dipole_Focus_X"    y="Dipole_Focus_Y"    z="Dipole_Focus_Z" />
      <bounding   xmin="Vacuum_BB_MinX" xmax="Vacuum_BB_MaxX"
                  ymin="Vacuum_BB_MinY" ymax="Vacuum_BB_MaxY"
                  zmin="Vacuum_BB_MinZ" zmax="Vacuum_BB_MaxZ"
      />
      <rotation   theta="Beam_Theta"/>
      <dimensions xL="Beam_WidthL" xR="Beam_WidthR" y="Beam_Height" z="Beam_Length"/>

      <comment> Vacuum volume joining with lumi </comment>
      <exitdim    x="Exit_Width"   y="Exit_Height"  lumiZ="LumiWin_Zstart" lumiR="LumiWin_R" maxTheta="Exit_Theta"/>

      <comment> Extended vacuum volume for taggers </comment>
      <module id="1" name="Tagger1">
        <position    x="Tagger1_Vac_Offset_X" y="Tagger1_Y" z="Tagger1_Vac_Offset_Z"/>
        <rotation    theta="Tagger1_Theta"/>
        <dimensions  x="Tagger1_Width" y="Tagger1_Height" z="2*Tagger1_Vac_Length"/>

        <foilLayer   id="0" type="foil"    z="0*mm"   thickness="100*um" angle="70*deg"/>
        <windowLayer id="1" type="window"  z="0*mm"   thickness="2*mm" material="CarbonFiber"/>
      </module>
      <module id="2" name="Tagger2">
        <position    x="Tagger2_Vac_Offset_X" y="Tagger2_Y" z="Tagger2_Vac_Offset_Z"/>
        <rotation    theta="Tagger2_Theta"/>
        <dimensions  x="Tagger2_Width" y="Tagger2_Height" z="2*Tagger2_Vac_Length"/>

        <foilLayer   id="0" type="foil"    z="0*mm"   thickness="100*um" angle="70*deg"/>
        <windowLayer id="1" type="window"  z="0*mm"   thickness="2*mm" material="CarbonFiber"/>
      </module>

    </detector>

  </detectors>

</lccdd>
