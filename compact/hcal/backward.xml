<!-- SPDX-License-Identifier: LGPL-3.0-or-later -->
<!-- Copyright (C) 2022 Wouter Deconinck, Leszek Kosarzewski, Ryan Milton -->

<lccdd>
  <define>
    <documentation>
      #### Material Thickness
    </documentation>
    <constant name="HcalEndcapNSteelThickness" value="4.0 * cm"/>
    <constant name="HcalEndcapNPolystyreneThickness" value="0.4 * cm"/>
    <constant name="HcalEndcapNLayerGap" value="0.15 * cm"/>
    <constant name="HcalEndcapNDiskGap" value="1 * cm"/>
    <constant name="HcalEndcapN_polyhedron_rmax" value="275.0*cm"/>
    <constant name="HcalEndcapN_segments_rmin" value="12.4*cm"/>

    <documentation>
      - Hcal Endcap N Layers and computed Thickness
    </documentation>

    <constant name="HcalEndcapNSingleLayerThickness" value="HcalEndcapNSteelThickness + HcalEndcapNPolystyreneThickness + HcalEndcapNLayerGap"/>
    <constant name="HcalEndcapNLayerNRepeat" value="10"/>
    <constant name="HcalEndcapNSingleSensitiveLayerThickness" value="HcalEndcapNPolystyreneThickness + HcalEndcapNLayerGap/2"/>
    <constant name="HcalEndcapN_thickness" value="HcalEndcapN_length"/>
  </define>


  <!-- Define detector -->
  <detectors>
    <documentation>
      ### Backwards (Negative Z) Endcap Hadronic Calorimeter
    </documentation>
    <detector id="HCalEndcapN_ID" name="HcalEndcapN" type="epic_PolyhedraEndcapCalorimeter2" readout="HcalEndcapNHits" vis="HcalEndcapVis" calorimeterType="HAD_ENDCAP" reflect="true">
      <position x="0" y="0" z="0"/>
      <dimensions numsides="HcalEndcapN_CaloSides" zmin="HcalEndcapN_zmin" rmin="HcalEndcapN_segments_rmin" rmax="HcalEndcapN_polyhedron_rmax"/>

      <layer repeat="HcalEndcapNLayerNRepeat" thickness="HcalEndcapNSingleLayerThickness" vis="HcalEndcapLayerVis" disksGap = "HcalEndcapNDiskGap">
        <slice material="Air" thickness="HcalEndcapNLayerGap/2" vis="InvisibleNoDaughters"/>
        <slice material="Polystyrene" thickness="HcalEndcapNPolystyreneThickness" vis="HcalSensorVis" sensitive="yes" limits="cal_limits"/>
        <slice material="Air" thickness="HcalEndcapNLayerGap/2" vis="InvisibleNoDaughters"/>
        <slice material="StainlessSteel" thickness="HcalEndcapNSteelThickness" vis="HcalAbsorberVis"/>
      </layer>

      <layer repeat="1" thickness="HcalEndcapNSingleSensitiveLayerThickness" vis="HcalEndcapLayerVis" disksGap = "HcalEndcapNDiskGap">
        <slice material="Air" thickness="HcalEndcapNLayerGap/2" vis="InvisibleNoDaughters"/>
        <slice material="Polystyrene" thickness="HcalEndcapNPolystyreneThickness" vis="HcalSensorVis" sensitive="yes" limits="cal_limits"/>
        <slice material="Air" thickness="HcalEndcapNLayerGap/2" vis="InvisibleNoDaughters"/>
      </layer>

    </detector>
  </detectors>

  <!--  Definition of the readout segmentation/definition  -->
  <readouts>
    <readout name="HcalEndcapNHits">
      <segmentation type="NoSegmentation"/>
      <id>system:8,barrel:3,module:4,layer:8,slice:5,halfdisk:10,sector:8,subsector:8,tile:10</id>
    </readout>
  </readouts>

</lccdd>
